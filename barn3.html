<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>B√∏rneordbog 3 (DA‚ÜíRU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* –∑–µ–ª—ë–Ω—ã–π */
.wrong { background-color: #f7c5c5; }   /* –∫—Ä–∞—Å–Ω—ã–π */
.wordSpan { margin-right: 3px; }
.speedControl { margin-left: 10px; }
</style>
</head>
<body>
<h2>B√∏rneordbog 3 (DA‚ÜíRU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle overs√¶ttelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
  { da: "arbejde", ru: "—Ä–∞–±–æ—Ç–∞", ex: "Jeg har meget ___. / –£ –º–µ–Ω—è –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç—ã.", parts: ["arbejde"] },
  { da: "penge", ru: "–¥–µ–Ω—å–≥–∏", ex: "Han tjener mange ___. / –û–Ω –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–≥–æ –¥–µ–Ω–µ–≥.", parts: ["penge"] },
  { da: "butik", ru: "–º–∞–≥–∞–∑–∏–Ω", ex: "Jeg k√∏ber mad i ___. / –Ø –ø–æ–∫—É–ø–∞—é –µ–¥—É –≤ –º–∞–≥–∞–∑–∏–Ω–µ.", parts: ["butik"] },
  { da: "by", ru: "–≥–æ—Ä–æ–¥", ex: "K√∏benhavn er en stor ___. / –ö–æ–ø–µ–Ω–≥–∞–≥–µ–Ω ‚Äî –±–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥.", parts: ["by"] },
  { da: "land", ru: "—Å—Ç—Ä–∞–Ω–∞", ex: "Danmark er et lille ___. / –î–∞–Ω–∏—è ‚Äî –º–∞–ª–µ–Ω—å–∫–∞—è —Å—Ç—Ä–∞–Ω–∞.", parts: ["land"] },
  { da: "vej", ru: "–¥–æ—Ä–æ–≥–∞ / —É–ª–∏—Ü–∞", ex: "Vi bor p√• en stille ___. / –ú—ã –∂–∏–≤—ë–º –Ω–∞ —Ç–∏—Ö–æ–π —É–ª–∏—Ü–µ.", parts: ["vej"] },
  { da: "marked", ru: "—Ä—ã–Ω–æ–∫", ex: "De s√¶lger frugt p√• ___. / –ù–∞ —Ä—ã–Ω–∫–µ –ø—Ä–æ–¥–∞—é—Ç —Ñ—Ä—É–∫—Ç—ã.", parts: ["marked"] },
  { da: "krop", ru: "—Ç–µ–ª–æ", ex: "Min ___ er tr√¶t. / –ú–æ—ë —Ç–µ–ª–æ —É—Å—Ç–∞–ª–æ.", parts: ["krop"] },
  { da: "mave", ru: "–∂–∏–≤–æ—Ç", ex: "Jeg har ondt i ___. / –£ –º–µ–Ω—è –±–æ–ª–∏—Ç –∂–∏–≤–æ—Ç.", parts: ["mave"] },
  { da: "ryg", ru: "—Å–ø–∏–Ω–∞", ex: "Han b√¶rer tasken p√• ___. / –û–Ω –Ω–µ—Å—ë—Ç —Å—É–º–∫—É –Ω–∞ —Å–ø–∏–Ω–µ.", parts: ["ryg"] },
  { da: "finger", ru: "–ø–∞–ª–µ—Ü", ex: "Jeg skar mig i ___. / –Ø –ø–æ—Ä–µ–∑–∞–ª –ø–∞–ª–µ—Ü.", parts: ["finger"] },
  { da: "venstre", ru: "–ª–µ–≤–æ", ex: "Drej til ___. / –ü–æ–≤–µ—Ä–Ω–∏ –Ω–∞–ª–µ–≤–æ.", parts: ["venstre"] },
  { da: "h√∏jre", ru: "–ø—Ä–∞–≤–æ", ex: "G√• til ___. / –ò–¥–∏ –Ω–∞–ø—Ä–∞–≤–æ.", parts: ["h√∏jre"] },
  { da: "morgen", ru: "—É—Ç—Ä–æ", ex: "God ___. / –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ.", parts: ["morgen"] },
  { da: "aften", ru: "–≤–µ—á–µ—Ä", ex: "God ___. / –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä.", parts: ["aften"] },
  { da: "nat", ru: "–Ω–æ—á—å", ex: "God ___. / –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏.", parts: ["nat"] },
  { da: "uge", ru: "–Ω–µ–¥–µ–ª—è", ex: "Der er syv dage i en ___. / –í –Ω–µ–¥–µ–ª–µ —Å–µ–º—å –¥–Ω–µ–π.", parts: ["uge"] },
  { da: "m√•ned", ru: "–º–µ—Å—è—Ü", ex: "En ___ har 30 dage. / –í –º–µ—Å—è—Ü–µ 30 –¥–Ω–µ–π.", parts: ["m√•ned"] },
  { da: "√•r", ru: "–≥–æ–¥", ex: "Jeg fylder 20 ___ i morgen. / –ú–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è 20 –ª–µ—Ç.", parts: ["√•r"] },
  { da: "transport", ru: "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç / –ø–µ—Ä–µ–≤–æ–∑–∫–∞", ex: "Jeg bruger offentlig ___ til arbejde. Transporten var forsinket.", parts: ["transport", "transport"] },
  { da: "billet", ru: "–±–∏–ª–µ—Ç", ex: "Jeg k√∏bte en ___. / –Ø –∫—É–ø–∏–ª –±–∏–ª–µ—Ç.", parts: ["billet"] },
  { da: "tog", ru: "–ø–æ–µ–∑–¥", ex: "Jeg tager ___ til byen. / –Ø –µ–¥—É –Ω–∞ –ø–æ–µ–∑–¥–µ –≤ –≥–æ—Ä–æ–¥.", parts: ["tog"] },
  { da: "bus", ru: "–∞–≤—Ç–æ–±—É—Å", ex: "Bussen kommer kl. 8. / –ê–≤—Ç–æ–±—É—Å –ø—Ä–∏–µ–¥–µ—Ç –≤ 8 —á–∞—Å–æ–≤.", parts: ["bus"] },
  { da: "cykel", ru: "–≤–µ–ª–æ—Å–∏–ø–µ–¥", ex: "Jeg k√∏rer p√• ___. / –Ø –µ–¥—É –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ.", parts: ["cykel"] },
  { da: "restaurant", ru: "—Ä–µ—Å—Ç–æ—Ä–∞–Ω", ex: "Vi spiser p√• en ___. / –ú—ã –µ–¥–∏–º –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ.", parts: ["restaurant"] },
  { da: "kaffe", ru: "–∫–æ—Ñ–µ", ex: "Jeg drikker ___. / –Ø –ø—å—é –∫–æ—Ñ–µ.", parts: ["kaffe"] },
  { da: "te", ru: "—á–∞–π", ex: "Hun drikker ___. / –û–Ω–∞ –ø—å—ë—Ç —á–∞–π.", parts: ["te"] },
  { da: "vandflaske", ru: "–±—É—Ç—ã–ª–∫–∞ –≤–æ–¥—ã", ex: "Jeg har en ___. / –£ –º–µ–Ω—è –µ—Å—Ç—å –±—É—Ç—ã–ª–∫–∞ –≤–æ–¥—ã.", parts: ["vandflaske"] },
  { da: "computer", ru: "–∫–æ–º–ø—å—é—Ç–µ—Ä", ex: "Jeg arbejder p√• ___. / –Ø —Ä–∞–±–æ—Ç–∞—é –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º.", parts: ["computer"] },
  { da: "telefon", ru: "—Ç–µ–ª–µ—Ñ–æ–Ω", ex: "Min ___ ringer hele tiden. / –ú–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω –≤—Å—ë –≤—Ä–µ–º—è –∑–≤–æ–Ω–∏—Ç.", parts: ["telefon"] },
  { da: "boghandel", ru: "–∫–Ω–∏–∂–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω", ex: "Jeg g√•r til ___ for at k√∏be b√∏ger. / –Ø –∏–¥—É –≤ –∫–Ω–∏–∂–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω, —á—Ç–æ–±—ã –∫—É–ø–∏—Ç—å –∫–Ω–∏–≥–∏.", parts: ["boghandel"] },
  { da: "bibliotek", ru: "–±–∏–±–ª–∏–æ—Ç–µ–∫–∞", ex: "Vi l√¶ser b√∏ger p√• ___. / –ú—ã —á–∏—Ç–∞–µ–º –∫–Ω–∏–≥–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.", parts: ["bibliotek"] },
  { da: "posthus", ru: "–ø–æ—á—Ç–∞", ex: "Jeg sender brevet p√• ___. / –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é –ø–∏—Å—å–º–æ –Ω–∞ –ø–æ—á—Ç–µ.", parts: ["posthus"] },
  { da: "sygehus", ru: "–±–æ–ª—å–Ω–∏—Ü–∞", ex: "Han blev indlagt p√• ___. / –ï–≥–æ –ø–æ–ª–æ–∂–∏–ª–∏ –≤ –±–æ–ª—å–Ω–∏—Ü—É.", parts: ["sygehus"] },
  { da: "park", ru: "–ø–∞—Ä–∫", ex: "B√∏rn leger i ___. / –î–µ—Ç–∏ –∏–≥—Ä–∞—é—Ç –≤ –ø–∞—Ä–∫–µ.", parts: ["park"] },
  { da: "museum", ru: "–º—É–∑–µ–π", ex: "Vi bes√∏ger et ___. / –ú—ã –ø–æ—Å–µ—â–∞–µ–º –º—É–∑–µ–π.", parts: ["museum"] },
  { da: "teater", ru: "—Ç–µ–∞—Ç—Ä", ex: "De g√•r i ___. / –û–Ω–∏ –∏–¥—É—Ç –≤ —Ç–µ–∞—Ç—Ä.", parts: ["teater"] },
  { da: "bio", ru: "–∫–∏–Ω–æ / –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä", ex: "Vi g√•r i ___. / –ú—ã –∏–¥—ë–º –≤ –∫–∏–Ω–æ.", parts: ["bio"] },
  { da: "hotel", ru: "–æ—Ç–µ–ª—å", ex: "Vi bor p√• et ___. / –ú—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è –≤ –æ—Ç–µ–ª–µ.", parts: ["hotel"] },
  { da: "fly", ru: "—Å–∞–º–æ–ª—ë—Ç", ex: "Jeg rejser med ___. / –Ø –ø—É—Ç–µ—à–µ—Å—Ç–≤—É—é –Ω–∞ —Å–∞–º–æ–ª—ë—Ç–µ.", parts: ["fly"] },
  { da: "t√∏j", ru: "–æ–¥–µ–∂–¥–∞", ex: "Jeg k√∏ber nyt ___. / –Ø –ø–æ–∫—É–ø–∞—é –Ω–æ–≤—É—é –æ–¥–µ–∂–¥—É.", parts: ["t√∏j"] },
  { da: "sko", ru: "–æ–±—É–≤—å", ex: "Hun har nye ___. / –£ –Ω–µ—ë –Ω–æ–≤–∞—è –æ–±—É–≤—å.", parts: ["sko"] }
];




const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");

  if (w.da.includes("...") && w.parts.length === 2) {
    const exParts = w.ex.split("___");
    
    const span1 = document.createElement("span");
    span1.textContent = exParts[0];
    exDiv.appendChild(span1);

    const input1 = document.createElement("input");
    input1.type = "text";
    input1.dataset.word = w.parts[0].toLowerCase();
    input1.className = "wordPart";
    exDiv.appendChild(input1);

    const spanMid = document.createElement("span");
    spanMid.textContent = exParts[1];
    exDiv.appendChild(spanMid);

    const input2 = document.createElement("input");
    input2.type = "text";
    input2.dataset.word = w.parts[1].toLowerCase();
    input2.className = "wordPart";
    exDiv.appendChild(input2);

    const spanEnd = document.createElement("span");
    spanEnd.textContent = exParts[2] ? exParts[2] : "";
    exDiv.appendChild(spanEnd);

  } else {
    let partIdx = 0;
    w.ex.split(" ").forEach(word => {
      if (word.includes("___")) {
        const wordsArray = w.parts[partIdx].split(" ");
        wordsArray.forEach(wPart => {
          const input = document.createElement("input");
          input.type = "text";
          input.dataset.word = wPart.toLowerCase();
          input.className = "wordPart";
          exDiv.appendChild(input);
          exDiv.appendChild(document.createTextNode(" "));
        });
        partIdx++;
      } else {
        const span = document.createElement("span");
        span.textContent = word;
        span.className = "wordSpan";
        span.dataset.word = word.replace(/[.,!?]/g, "").toLowerCase();
        exDiv.appendChild(span);
        exDiv.appendChild(document.createTextNode(" "));
      }
    });
  }

  // –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    const inputs = exDiv.querySelectorAll("input");
    let allCorrect = true;
    inputs.forEach(inp => {
      const correctWords = inp.dataset.word.toLowerCase().split(" ");
      const userWords = inp.value.trim().toLowerCase().split(" ");
      const isCorrect = correctWords.length === userWords.length &&
                        correctWords.every((w,i)=>w===userWords[i]);
      if(isCorrect){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
        allCorrect = false;
      }
    });
    const result = document.createElement("div");
    result.className = allCorrect ? "correct" : "wrong";
    result.textContent = allCorrect ? "Korrekt!" : "Forkert!";
    exDiv.appendChild(result);
    setTimeout(()=>result.remove(),1500);
  };

  // –∫–Ω–æ–ø–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
  const micBtn = document.createElement("button");
  micBtn.textContent = "üéôÔ∏è L√¶s h√∏jt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();
    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(word && spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else if(word){
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  // –∫–Ω–æ–ø–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "‚ñ∂Ô∏è H√∏r original";
  
  const speedWrapper = document.createElement("div");
  speedWrapper.style.display = "flex";
  speedWrapper.style.alignItems = "center";
  speedWrapper.style.gap = "6px";

  const speedSlider = document.createElement("input");
  speedSlider.type = "range";
  speedSlider.min = "0.5";
  speedSlider.max = "1.5";
  speedSlider.step = "0.1";
  speedSlider.value = "1";
  speedSlider.className = "speedControl";

  const speedLabel = document.createElement("span");
  speedLabel.textContent = speedSlider.value + "x";
  speedLabel.style.fontSize = "0.9em";
  speedLabel.style.color = "#444";

  speedSlider.addEventListener("input", () => {
    speedLabel.textContent = speedSlider.value + "x";
  });

  playOrigBtn.onclick = () => {
    // –±–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –¥–∞—Ç—Å–∫—É—é —á–∞—Å—Ç—å (–¥–æ /, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥)
    const daExample = w.ex.split("/")[0].trim();
    const utterance = new SpeechSynthesisUtterance(
      daExample.replace(/___/g, () => w.parts.join(" "))
    );
    utterance.lang = "da-DK";
    utterance.rate = parseFloat(speedSlider.value);
    window.speechSynthesis.speak(utterance);
  };

  // —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(playOrigBtn);

  speedWrapper.appendChild(speedSlider);
  speedWrapper.appendChild(speedLabel);
  div.appendChild(speedWrapper);

  container.appendChild(div);
});

// –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>
