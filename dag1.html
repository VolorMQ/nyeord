<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>DAG 1 (DA‚ÜíRU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* –∑–µ–ª—ë–Ω—ã–π */
.wrong { background-color: #f7c5c5; }   /* –∫—Ä–∞—Å–Ω—ã–π */
.wordSpan { margin-right: 3px; }
.speedControl { margin-left: 10px; }
</style>
</head>
<body>
<h2>DAG 1 (DA‚ÜíRU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle overs√¶ttelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
    { da: "n√¶r", ru: "–±–ª–∏–∑–∫–∏–π / —Ä—è–¥–æ–º", ex: "Han bor ___ skolen. Jeg stod ___ ved siden af ham.", parts: ["n√¶r", "n√¶r"] },
    { da: "erendringer", ru: "–∏–∑–º–µ–Ω–µ–Ω–∏—è / –ø–µ—Ä–µ–º–µ–Ω—ã", ex: "Der er mange ___ i projektet. Vi diskuterede de kommende ___.", parts: ["√¶ndringer", "√¶ndringer"] },
    { da: "klagger", ru: "–∂–∞–ª–æ–±—ã / —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏", ex: "Der kom mange ___ fra kunderne. Hun skrev en ___ til firmaet.", parts: ["klager", "klager"] },
    { da: "uhyrligt", ru: "—É–∂–∞—Å–Ω—ã–π / —á—É–¥–æ–≤–∏—â–Ω—ã–π", ex: "Vejret var ___ koldt. Situationen var ___ stressende.", parts: ["uhyrligt", "uhyrligt"] },
    { da: "antyde", ru: "–Ω–∞–º–µ–∫–∞—Ç—å", ex: "Hans smil kunne ___ noget godt.", parts: ["antyde"] },
    { da: "antyder", ru: "–Ω–∞–º–µ–∫–∞–µ—Ç", ex: "Tegnene ___ problemer.", parts: ["antyder"] },
    { da: "antydede", ru: "–Ω–∞–º–µ–∫–∞–ª", ex: "Hun ___ det indirekte i sin tale.", parts: ["antydede"] },
    { da: "antydet", ru: "–Ω–∞–º–µ—á–µ–Ω–æ / –Ω–∞–º–µ–∫–Ω—É–ª", ex: "Resultaterne er allerede ___. Hun ___ det indirekte.", parts: ["antydet", "antydet"] },
    { da: "tydeligere", ru: "–æ—á–µ–≤–∏–¥–Ω–µ–µ / —è—Å–Ω–µ–µ", ex: "Budskabet blev ___ med tiden. Forklaringen blev ___.", parts: ["tydeligere", "tydeligere"] },
    { da: "regering", ru: "–ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ / —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ", ex: "Den danske ___ har nye love. Byens ___ tog beslutningen.", parts: ["regering", "regering"] },
    { da: "samtidig", ru: "–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π / –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ", ex: "De talte ___ i telefonen. Begivenhederne skete ___.", parts: ["samtidig", "samtidig"] },
    { da: "udvilka", ru: "–Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π / –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π", ex: "Situationen var ___ og uklar. Han vidste ___ hvad der skete.", parts: ["uklar", "ikke"] },
    { da: "frugtelige", ru: "–ø–ª–æ–¥–æ—Ç–≤–æ—Ä–Ω—ã–π / –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π", ex: "M√∏det var ___ og gav resultater. Jorden er ___ for landbrug.", parts: ["frugtelige", "frugtbart"] },
    { da: "str√∏g", ru: "–ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π –ø—É—Ç—å / —É–ª–∏—Ü–∞", ex: "Han gik et langt ___. Vi boede p√• en smuk ___.", parts: ["str√∏g", "str√∏g"] },
    { da: "hjerne", ru: "–º–æ–∑–≥", ex: "Menneskets ___ er kompleks. Han studerer ___-forskning.", parts: ["hjerne", "hjerne"] },
    { da: "kollapse", ru: "–∫–æ–ª–ª–∞–ø—Å / —Ä—É—Ö–Ω—É—Ç—å", ex: "Bygningen kan ___ under tryk. Han f√∏lte, han ville ___.", parts: ["kollaps", "kollaps"] },
    { da: "kollapser", ru: "—Ä—É—Ö–Ω–µ—Ç", ex: "Systemet ___ under presset.", parts: ["kollapser"] },
    { da: "kollapsede", ru: "—Ä—É—Ö–Ω—É–ª", ex: "Broen ___ under stormen.", parts: ["kollapsede"] },
    { da: "kollapset", ru: "—Ä—É—Ö–Ω—É–≤—à–∏–π / –∫–æ–ª–ª–∞–ø—Å–∏—Ä–æ–≤–∞–≤—à–∏–π", ex: "Bygningen er allerede ___. Systemet ___ under presset.", parts: ["kollapset", "kollapset"] },
    { da: "beh√∏vede", ru: "–Ω—É–∂–¥–∞–ª—Å—è / —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å", ex: "Han ___ hj√¶lp med opgaven. Der ___ mere tid til projektet.", parts: ["beh√∏vede", "var"] },
    { da: "dyster", ru: "–º—Ä–∞—á–Ω—ã–π / —É–Ω—ã–ª—ã–π", ex: "Vejret var ___ og regnfuldt. Stemningen var ___ i rummet.", parts: ["dyster", "dyster"] },
    { da: "forskr√¶kkede", ru: "–∏—Å–ø—É–≥–∞–Ω–Ω—ã–π / –≤—Å—Ç—Ä–µ–≤–æ–∂–µ–Ω–Ω—ã–π", ex: "Hun blev ___ af lyden. B√∏rnene s√• ___ ud.", parts: ["forskr√¶kkede", "forskr√¶kkede"] },
    { da: "glemmer", ru: "–∑–∞–±—ã–≤–∞–µ—Ç", ex: "Han ___ altid sine n√∏gler. Hun ___ at svare p√• beskeden.", parts: ["glemmer", "glemmer"] },
    { da: "glemte", ru: "–∑–∞–±—ã–ª", ex: "Han ___ sin taske hjemme.", parts: ["glemte"] },
    { da: "glemt", ru: "–∑–∞–±—ã–ª / –∑–∞–±—ã—Ç—ã–π", ex: "Han ___ n√∏glerne. Filen er allerede ___.", parts: ["glemt", "glemt"] },
    { da: "stivnede", ru: "–æ–∫–∞–º–µ–Ω–µ–ª / –∑–∞—Å—Ç—ã–ª", ex: "Hans muskler ___ af kulde. Publikum ___ af frygt.", parts: ["stivnede", "stivnede"] },
    { da: "ansigt", ru: "–ª–∏—Ü–æ / –≤—ã—Ä–∞–∂–µ–Ω–∏–µ", ex: "Hun vaskede sit ___. Hans ___ viste overraskelse.", parts: ["ansigt", "ansigt"] },
    { da: "rammet", ru: "–ø–æ—Ä–∞–∂—ë–Ω–Ω—ã–π / –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–π", ex: "Bygningen blev ___ af stormen. Han var f√∏lelsesm√¶ssigt ___.", parts: ["rammet", "rammet"] },
    { da: "omg√•ende", ru: "–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ / —Å—Ä–∞–∑—É", ex: "Vi skal reagere ___. Han fik ___ besked.", parts: ["omg√•ende", "omg√•ende"] },
    { da: "if√∏rt", ru: "–≤ –æ–¥–µ–∂–¥–µ / –æ–¥–µ—Ç—ã–π", ex: "Han var ___ en bl√• jakke. Hun stod ___ hat og frakke.", parts: ["if√∏rt", "if√∏rt"] },
    { da: "aske", ru: "–ø–µ–ø–µ–ª / –∑–æ–ª–∞", ex: "Vulkanen spyttede ___ ud. Han samlede ___ fra pejsen.", parts: ["aske", "aske"] },
    { da: "samme", ru: "—Ç–æ—Ç –∂–µ / –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π", ex: "Vi brugte den ___ metode. De havde den ___ id√©.", parts: ["samme", "samme"] },
    { da: "b√•nd", ru: "–ª–µ–Ω—Ç–∞ / —Å–≤—è–∑—å", ex: "Han knyttede et ___ om pakken. Familien har st√¶rke ___.", parts: ["b√•nd", "b√•nd"] },
    { da: "tr√∏stesl√∏st", ru: "–±–µ–∑—É—Ç–µ—à–Ω—ã–π / –±–µ–∑–Ω–∞–¥—ë–∂–Ω—ã–π", ex: "Situation var ___ trist. Han f√∏lte sig ___ alene.", parts: ["tr√∏stesl√∏st", "tr√∏stesl√∏st"] },
    { da: "k√∏lige", ru: "–ø—Ä–æ—Ö–ª–∞–¥–Ω—ã–π / —Ö–æ–ª–æ–¥–Ω—ã–π", ex: "Vinden var ___ og frisk. Hun m√¶rkede ___ h√¶nder.", parts: ["k√∏lige", "k√∏lige"] },
    { da: "telefonopkald", ru: "—Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫", ex: "Han modtog et vigtigt ___. Jeg lavede et ___ til min ven.", parts: ["telefonopkald", "telefonopkald"] },
    { da: "fjerne", ru: "—É–¥–∞–ª—è—Ç—å", ex: "Han skal ___ fejlene i koden.", parts: ["fjerne"] },
    { da: "fjerner", ru: "—É–¥–∞–ª—è–µ—Ç", ex: "Hun ___ gamle filer fra computeren.", parts: ["fjerner"] },
    { da: "fjernede", ru: "—É–¥–∞–ª—è–ª", ex: "Han ___ dokumentet i g√•r.", parts: ["fjernede"] },
    { da: "fjernet", ru: "—É–¥–∞–ª—ë–Ω / —É–¥–∞–ª–∏–ª", ex: "Filen er allerede ___. Han ___ dokumentet korrekt.", parts: ["fjernet", "fjernet"] }
];



const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");

  if (w.da.includes("...") && w.parts.length === 2) {
    const exParts = w.ex.split("___");
    
    const span1 = document.createElement("span");
    span1.textContent = exParts[0];
    exDiv.appendChild(span1);

    const input1 = document.createElement("input");
    input1.type = "text";
    input1.dataset.word = w.parts[0].toLowerCase();
    input1.className = "wordPart";
    exDiv.appendChild(input1);

    const spanMid = document.createElement("span");
    spanMid.textContent = exParts[1];
    exDiv.appendChild(spanMid);

    const input2 = document.createElement("input");
    input2.type = "text";
    input2.dataset.word = w.parts[1].toLowerCase();
    input2.className = "wordPart";
    exDiv.appendChild(input2);

    const spanEnd = document.createElement("span");
    spanEnd.textContent = exParts[2] ? exParts[2] : "";
    exDiv.appendChild(spanEnd);

  } else {
    let partIdx = 0;
    w.ex.split(" ").forEach(word => {
      if (word.includes("___")) {
        const wordsArray = w.parts[partIdx].split(" ");
        wordsArray.forEach(wPart => {
          const input = document.createElement("input");
          input.type = "text";
          input.dataset.word = wPart.toLowerCase();
          input.className = "wordPart";
          exDiv.appendChild(input);
          exDiv.appendChild(document.createTextNode(" "));
        });
        partIdx++;
      } else {
        const span = document.createElement("span");
        span.textContent = word;
        span.className = "wordSpan";
        span.dataset.word = word.replace(/[.,!?]/g, "").toLowerCase();
        exDiv.appendChild(span);
        exDiv.appendChild(document.createTextNode(" "));
      }
    });
  }

  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    const inputs = exDiv.querySelectorAll("input");
    let allCorrect = true;
    inputs.forEach(inp => {
      const correctWords = inp.dataset.word.toLowerCase().split(" ");
      const userWords = inp.value.trim().toLowerCase().split(" ");
      const isCorrect = correctWords.length === userWords.length &&
                        correctWords.every((w,i)=>w===userWords[i]);
      if(isCorrect){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
        allCorrect = false;
      }
    });
    const result = document.createElement("div");
    result.className = allCorrect ? "correct" : "wrong";
    result.textContent = allCorrect ? "Korrekt!" : "Forkert!";
    exDiv.appendChild(result);
    setTimeout(()=>result.remove(),1500);
  };

  const micBtn = document.createElement("button");
  micBtn.textContent = "üéôÔ∏è L√¶s h√∏jt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();
    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(word && spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else if(word){
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "‚ñ∂Ô∏è H√∏r original";
  
  const speedWrapper = document.createElement("div");
  speedWrapper.style.display = "flex";
  speedWrapper.style.alignItems = "center";
  speedWrapper.style.gap = "6px";

  const speedSlider = document.createElement("input");
  speedSlider.type = "range";
  speedSlider.min = "0.5";
  speedSlider.max = "1.5";
  speedSlider.step = "0.1";
  speedSlider.value = "1";
  speedSlider.className = "speedControl";

  const speedLabel = document.createElement("span");
  speedLabel.textContent = speedSlider.value + "x";
  speedLabel.style.fontSize = "0.9em";
  speedLabel.style.color = "#444";

  speedSlider.addEventListener("input", () => {
    speedLabel.textContent = speedSlider.value + "x";
  });

  playOrigBtn.onclick = () => {
    const utterance = new SpeechSynthesisUtterance(
      w.ex.replace(/___/g, ()=>w.parts.join(" "))
    );
    utterance.lang = "da-DK";
    utterance.rate = parseFloat(speedSlider.value);
    window.speechSynthesis.speak(utterance);
  };

  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(playOrigBtn);

  speedWrapper.appendChild(speedSlider);
  speedWrapper.appendChild(speedLabel);
  div.appendChild(speedWrapper);

  container.appendChild(div);
});

document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>
