<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Børneordbog 4 (DA→RU)</title>
<style>
body { font-family: sans-serif; line-height: 1.6; margin: 20px; }
.word { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 12px; }
.hidden { display: none; }
input[type="text"] { padding: 5px; margin: 3px; width: 120px; }
button { margin-left: 5px; padding: 5px 10px; }
.correct { background-color: #c8f7c5; } /* зелёный */
.wrong { background-color: #f7c5c5; }   /* красный */
.wordSpan { margin-right: 3px; }
.speedControl { margin-left: 10px; }
</style>
</head>
<body>
<h2>Børneordbog 4 (DA→RU)</h2>
<label><input type="checkbox" id="toggleWords"> Skjul alle ord</label>
<label><input type="checkbox" id="toggleTranslations"> Skjul alle oversættelser</label>

<div id="wordsContainer"></div>

<script>
const words = [
  { da: "læge", ru: "врач", ex: "Min ___ arbejder på hospitalet. / Мой врач работает в больнице.", parts: ["læge"] },
  { da: "sygeplejerske", ru: "медсестра", ex: "___ hjælper patienterne. / Медсестра помогает пациентам.", parts: ["sygeplejerske"] },
  { da: "student", ru: "студент", ex: "Han er ___ på universitetet. / Он студент университета.", parts: ["student"] },
  { da: "lærerinde", ru: "учительница", ex: "Min ___ underviser børnene. / Моя учительница учит детей.", parts: ["lærerinde"] },
  { da: "chef", ru: "шеф / начальник", ex: "Han er min ___. / Он мой начальник.", parts: ["chef"] },
  { da: "venlig", ru: "дружелюбный / любезный", ex: "Hun er altid ___. / Она всегда дружелюбная.", parts: ["venlig"] },
  { da: "glad", ru: "счастливый / радостный", ex: "Jeg er ___ i dag. / Я счастлив сегодня.", parts: ["glad"] },
  { da: "trist", ru: "грустный", ex: "Han ser ___ ud. / Он выглядит грустным.", parts: ["trist"] },
  { da: "sur", ru: "сердитый", ex: "Hun er ___ på sin bror. / Она сердита на брата.", parts: ["sur"] },
  { da: "regnvejr", ru: "дождливая погода", ex: "Vi bliver inde på grund af ___. / Мы остаёмся дома из-за дождливой погоды.", parts: ["regnvejr"] },
  { da: "sne", ru: "снег", ex: "Der falder ___. / Падает снег.", parts: ["sne"] },
  { da: "solskin", ru: "солнечная погода", ex: "Vi nyder ___. / Мы наслаждаемся солнечной погодой.", parts: ["solskin"] },
  { da: "storm", ru: "шторм", ex: "___ ødelagde træet. / Шторм сломал дерево.", parts: ["storm"] },
  { da: "skov", ru: "лес", ex: "Vi går en tur i ___. / Мы гуляем по лесу.", parts: ["skov"] },
  { da: "sø", ru: "озеро", ex: "Børnene leger ved ___. / Дети играют возле озера.", parts: ["sø"] },
  { da: "flod", ru: "река", ex: "Fisk svømmer i ___. / Рыбы плавают в реке.", parts: ["flod"] },
  { da: "strand", ru: "пляж", ex: "Vi soler os på ___. / Мы загораем на пляже.", parts: ["strand"] },
  { da: "bjerg", ru: "гора", ex: "Vi bestiger et ___. / Мы поднимаемся на гору.", parts: ["bjerg"] },
  { da: "dyrepark", ru: "зоопарк", ex: "Vi besøger ___. / Мы посещаем зоопарк.", parts: ["dyrepark"] },
  { da: "elefant", ru: "слон", ex: "___ drikker vand. / Слон пьёт воду.", parts: ["elefant"] },
  { da: "løve", ru: "лев", ex: "___ sover i solen. / Лев спит на солнце.", parts: ["løve"] },
  { da: "grøntsager", ru: "овощи", ex: "Vi køber ___ i butikken. / Мы покупаем овощи в магазине.", parts: ["grøntsager"] },
  { da: "køkken", ru: "кухня", ex: "Der er rent i ___. / На кухне чисто.", parts: ["køkken"] },
  { da: "stue", ru: "гостиная", ex: "Vi ser tv i ___. / Мы смотрим телевизор в гостиной.", parts: ["stue"] },
  { da: "soveværelse", ru: "спальня", ex: "Mit ___ er blåt. / Моя спальня синяя.", parts: ["soveværelse"] },
  { da: "bad", ru: "ванная / купание", ex: "Jeg tager et ___. / Я принимаю ванну.", parts: ["bad"] },
  { da: "havearbejde", ru: "садоводство", ex: "Vi laver ___ i weekenden. / Мы занимаемся садоводством на выходных.", parts: ["havearbejde"] },
  { da: "svømme", ru: "плавать", ex: "Børnene kan ___. / Дети умеют плавать.", parts: ["svømme"] },
  { da: "cykle", ru: "кататься на велосипеде", ex: "Jeg elsker at ___. / Я люблю кататься на велосипеде.", parts: ["cykle"] },
  { da: "drikke", ru: "пить", ex: "Hun vil ___ vand. / Она хочет пить воду.", parts: ["drikke"] },
  { da: "læse", ru: "читать", ex: "Jeg kan godt lide at ___. / Мне нравится читать.", parts: ["læse"] },
  { da: "skrive", ru: "писать", ex: "Han kan ___. / Он умеет писать.", parts: ["skrive"] },
  { da: "male", ru: "рисовать / красить", ex: "Hun elsker at ___. / Она любит рисовать.", parts: ["male"] },
  { da: "synge", ru: "петь", ex: "Vi kan ___ sammen. / Мы можем петь вместе.", parts: ["synge"] },
  { da: "spille", ru: "играть (на инструменте / в игры)", ex: "Jeg kan ___ klaver. / Я умею играть на пианино.", parts: ["spille"] },
  { da: "danse", ru: "танцевать", ex: "Vi vil ___ til festen. / Мы будем танцевать на вечеринке.", parts: ["danse"] },
  { da: "rejse", ru: "путешествовать", ex: "Jeg elsker at ___. / Я люблю путешествовать.", parts: ["rejse"] },
  { da: "ferie", ru: "отпуск / каникулы", ex: "Vi skal på ___. / Мы едем в отпуск.", parts: ["ferie"] },
  { da: "samarbejde", ru: "сотрудничество / совместная работа", ex: "Vi har godt ___. / У нас хорошее сотрудничество.", parts: ["samarbejde"] },
  { da: "oplevelse", ru: "опыт / впечатление", ex: "Det var en spændende ___. / Это был захватывающий опыт.", parts: ["oplevelse"] },
  { da: "kunst", ru: "искусство", ex: "Hun elsker ___. / Она любит искусство.", parts: ["kunst"] },
  { da: "musik", ru: "музыка", ex: "Jeg hører ___ hver dag. / Я слушаю музыку каждый день.", parts: ["musik"] },
  { da: "film", ru: "фильм", ex: "Vi ser en ___. / Мы смотрим фильм.", parts: ["film"] },
  { da: "historie", ru: "история", ex: "Vi lærer om ___. / Мы изучаем историю.", parts: ["historie"] },
  { da: "geografi", ru: "география", ex: "___ er spændende. / География интересная.", parts: ["geografi"] },
  { da: "matematik", ru: "математика", ex: "Jeg kan godt lide ___. / Мне нравится математика.", parts: ["matematik"] },
  { da: "fysik", ru: "физика", ex: "___ er svært. / Физика сложная.", parts: ["fysik"] },
  { da: "kemi", ru: "химия", ex: "Vi har timer i ___. / У нас есть уроки химии.", parts: ["kemi"] },
  { da: "biologi", ru: "биология", ex: "Jeg lærer om dyr i ___. / Я изучаю животных на уроках биологии.", parts: ["biologi"] },
  { da: "teknologi", ru: "технология", ex: "___ udvikler sig hurtigt. / Технологии развиваются быстро.", parts: ["teknologi"] },
  { da: "miljø", ru: "окружающая среда", ex: "Vi skal passe på ___. / Мы должны заботиться об окружающей среде.", parts: ["miljø"] },
  { da: "energi", ru: "энергия", ex: "Vi bruger sol___ hver dag. / Мы используем солнечную энергию каждый день.", parts: ["energi"] }
];



const container = document.getElementById("wordsContainer");

words.forEach((w, idx) => {
  const div = document.createElement("div");
  div.className = "word";

  const da = document.createElement("div");
  da.className = "daWord";
  da.textContent = "DA: " + w.da;

  const ru = document.createElement("div");
  ru.className = "ruWord";
  ru.textContent = "RU: " + w.ru;

  const exDiv = document.createElement("div");

  if (w.da.includes("...") && w.parts.length === 2) {
    const exParts = w.ex.split("___");
    
    const span1 = document.createElement("span");
    span1.textContent = exParts[0];
    exDiv.appendChild(span1);

    const input1 = document.createElement("input");
    input1.type = "text";
    input1.dataset.word = w.parts[0].toLowerCase();
    input1.className = "wordPart";
    exDiv.appendChild(input1);

    const spanMid = document.createElement("span");
    spanMid.textContent = exParts[1];
    exDiv.appendChild(spanMid);

    const input2 = document.createElement("input");
    input2.type = "text";
    input2.dataset.word = w.parts[1].toLowerCase();
    input2.className = "wordPart";
    exDiv.appendChild(input2);

    const spanEnd = document.createElement("span");
    spanEnd.textContent = exParts[2] ? exParts[2] : "";
    exDiv.appendChild(spanEnd);

  } else {
    let partIdx = 0;
    w.ex.split(" ").forEach(word => {
      if (word.includes("___")) {
        const wordsArray = w.parts[partIdx].split(" ");
        wordsArray.forEach(wPart => {
          const input = document.createElement("input");
          input.type = "text";
          input.dataset.word = wPart.toLowerCase();
          input.className = "wordPart";
          exDiv.appendChild(input);
          exDiv.appendChild(document.createTextNode(" "));
        });
        partIdx++;
      } else {
        const span = document.createElement("span");
        span.textContent = word;
        span.className = "wordSpan";
        span.dataset.word = word.replace(/[.,!?]/g, "").toLowerCase();
        exDiv.appendChild(span);
        exDiv.appendChild(document.createTextNode(" "));
      }
    });
  }

  // кнопка проверки
  const checkBtn = document.createElement("button");
  checkBtn.textContent = "Tjek";
  checkBtn.onclick = () => {
    const inputs = exDiv.querySelectorAll("input");
    let allCorrect = true;
    inputs.forEach(inp => {
      const correctWords = inp.dataset.word.toLowerCase().split(" ");
      const userWords = inp.value.trim().toLowerCase().split(" ");
      const isCorrect = correctWords.length === userWords.length &&
                        correctWords.every((w,i)=>w===userWords[i]);
      if(isCorrect){
        inp.classList.add("correct");
        inp.classList.remove("wrong");
      } else {
        inp.classList.add("wrong");
        inp.classList.remove("correct");
        allCorrect = false;
      }
    });
    const result = document.createElement("div");
    result.className = allCorrect ? "correct" : "wrong";
    result.textContent = allCorrect ? "Korrekt!" : "Forkert!";
    exDiv.appendChild(result);
    setTimeout(()=>result.remove(),1500);
  };

  // кнопка микрофона
  const micBtn = document.createElement("button");
  micBtn.textContent = "🎙️ Læs højt";
  micBtn.onclick = () => {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "da-DK";
    recognition.interimResults = false;
    recognition.start();
    recognition.onresult = event => {
      const spoken = event.results[0][0].transcript.toLowerCase();
      exDiv.querySelectorAll("span, input").forEach(el => {
        const word = el.dataset.word;
        if(word && spoken.includes(word)){
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else if(word){
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    };
    recognition.onerror = err => console.error("SpeechRecognition error:", err);
  };

  // кнопка воспроизведения оригинала
  const playOrigBtn = document.createElement("button");
  playOrigBtn.textContent = "▶️ Hør original";
  
  const speedWrapper = document.createElement("div");
  speedWrapper.style.display = "flex";
  speedWrapper.style.alignItems = "center";
  speedWrapper.style.gap = "6px";

  const speedSlider = document.createElement("input");
  speedSlider.type = "range";
  speedSlider.min = "0.5";
  speedSlider.max = "1.5";
  speedSlider.step = "0.1";
  speedSlider.value = "1";
  speedSlider.className = "speedControl";

  const speedLabel = document.createElement("span");
  speedLabel.textContent = speedSlider.value + "x";
  speedLabel.style.fontSize = "0.9em";
  speedLabel.style.color = "#444";

  speedSlider.addEventListener("input", () => {
    speedLabel.textContent = speedSlider.value + "x";
  });

  playOrigBtn.onclick = () => {
    // берем только датскую часть (до /, если есть перевод)
    const daExample = w.ex.split("/")[0].trim();
    const utterance = new SpeechSynthesisUtterance(
      daExample.replace(/___/g, () => w.parts.join(" "))
    );
    utterance.lang = "da-DK";
    utterance.rate = parseFloat(speedSlider.value);
    window.speechSynthesis.speak(utterance);
  };

  // собираем все элементы
  div.appendChild(da);
  div.appendChild(ru);
  div.appendChild(exDiv);
  div.appendChild(checkBtn);
  div.appendChild(micBtn);
  div.appendChild(playOrigBtn);

  speedWrapper.appendChild(speedSlider);
  speedWrapper.appendChild(speedLabel);
  div.appendChild(speedWrapper);

  container.appendChild(div);
});

// переключатели видимости
document.getElementById("toggleWords").onchange = e => {
  document.querySelectorAll(".daWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
document.getElementById("toggleTranslations").onchange = e => {
  document.querySelectorAll(".ruWord").forEach(d => d.classList.toggle("hidden", e.target.checked));
};
</script>
</body>
</html>
